(this.webpackJsonprenju=this.webpackJsonprenju||[]).push([[0],{46:function(e,t,r){e.exports=r(62)},51:function(e,t,r){},52:function(e,t,r){},62:function(e,t,r){"use strict";r.r(t);var s=r(0),i=r.n(s),n=r(26),a=r.n(n),o=(r(51),r(2)),c=r(35),h=r(70),l=(r(52),r(10)),u=r(11),w=function(e,t){return e[0]===t[0]&&e[1]===t[1]},d=function(e){return"ABCDEFGHIJKLMNO".charAt(e-1)},m=function(e){return e.toString()},k=function(e){var t=Object(o.a)(e,2),r=t[0],s=t[1];return"".concat(d(r)).concat(m(s))},b=function(e){var t="ABCDEFGHIJKLMNO".indexOf(e[0].toUpperCase())+1,r=parseInt(e.slice(1));if(!(t<1||15<t||r<1||15<r))return[t,r]},f=r(16),v={two:[{row:{kind:"two",size:4,eyes:[2,3]},size:8,rowStart:2,blacks:12,whites:0,blmask:0,whmask:129},{row:{kind:"two",size:4,eyes:[1,3]},size:8,rowStart:2,blacks:20,whites:0,blmask:0,whmask:129},{row:{kind:"two",size:4,eyes:[0,3]},size:8,rowStart:2,blacks:24,whites:0,blmask:0,whmask:129},{row:{kind:"two",size:4,eyes:[1,2]},size:8,rowStart:2,blacks:36,whites:0,blmask:0,whmask:129},{row:{kind:"two",size:4,eyes:[0,2]},size:8,rowStart:2,blacks:40,whites:0,blmask:0,whmask:129},{row:{kind:"two",size:4,eyes:[0,1]},size:8,rowStart:2,blacks:48,whites:0,blmask:0,whmask:129}],closedThree:[{row:{kind:"closedThree",size:5,eyes:[2,3]},size:7,rowStart:1,blacks:38,whites:0,blmask:0,whmask:65},{row:{kind:"closedThree",size:5,eyes:[1,3]},size:7,rowStart:1,blacks:42,whites:0,blmask:0,whmask:65},{row:{kind:"closedThree",size:5,eyes:[1,2]},size:7,rowStart:1,blacks:50,whites:0,blmask:0,whmask:65},{row:{kind:"closedThree",size:5,eyes:[3,4]},size:7,rowStart:1,blacks:14,whites:1,blmask:0,whmask:64},{row:{kind:"closedThree",size:5,eyes:[3,5]},size:7,rowStart:1,blacks:22,whites:1,blmask:0,whmask:64},{row:{kind:"closedThree",size:5,eyes:[2,5]},size:7,rowStart:1,blacks:26,whites:1,blmask:0,whmask:64},{row:{kind:"closedThree",size:5,eyes:[0,3]},size:7,rowStart:1,blacks:44,whites:64,blmask:0,whmask:1},{row:{kind:"closedThree",size:5,eyes:[0,2]},size:7,rowStart:1,blacks:52,whites:64,blmask:0,whmask:1},{row:{kind:"closedThree",size:5,eyes:[0,1]},size:7,rowStart:1,blacks:56,whites:64,blmask:0,whmask:1},{row:{kind:"closedThree",size:5,eyes:[1,5]},size:7,rowStart:1,blacks:28,whites:65,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[1,4]},size:8,rowStart:2,blacks:53,whites:0,blmask:0,whmask:128},{row:{kind:"closedThree",size:5,eyes:[0,3]},size:8,rowStart:1,blacks:172,whites:0,blmask:0,whmask:1}],three:[{row:{kind:"three",size:6,eyes:[4]},size:8,rowStart:1,blacks:28,whites:0,blmask:0,whmask:129},{row:{kind:"three",size:6,eyes:[3]},size:8,rowStart:1,blacks:44,whites:0,blmask:0,whmask:129},{row:{kind:"three",size:6,eyes:[2]},size:8,rowStart:1,blacks:52,whites:0,blmask:0,whmask:129},{row:{kind:"three",size:6,eyes:[1]},size:8,rowStart:1,blacks:56,whites:0,blmask:0,whmask:129}],four:[{row:{kind:"four",size:5,eyes:[4]},size:7,rowStart:1,blacks:30,whites:0,blmask:0,whmask:65},{row:{kind:"four",size:5,eyes:[3]},size:7,rowStart:1,blacks:46,whites:0,blmask:0,whmask:65},{row:{kind:"four",size:5,eyes:[2]},size:7,rowStart:1,blacks:54,whites:0,blmask:0,whmask:65},{row:{kind:"four",size:5,eyes:[1]},size:7,rowStart:1,blacks:58,whites:0,blmask:0,whmask:65},{row:{kind:"four",size:5,eyes:[0]},size:7,rowStart:1,blacks:60,whites:0,blmask:0,whmask:65}],five:[{row:{kind:"five",size:5,eyes:[]},size:7,rowStart:1,blacks:62,whites:0,blmask:0,whmask:65}],overline:[{row:{kind:"overline",size:6,eyes:[]},size:6,rowStart:0,blacks:63,whites:0,blmask:0,whmask:0}]},y={two:[{row:{kind:"two",size:4,eyes:[2,3]},size:6,rowStart:1,blacks:0,whites:6,blmask:0,whmask:0},{row:{kind:"two",size:4,eyes:[1,3]},size:6,rowStart:1,blacks:0,whites:10,blmask:0,whmask:0},{row:{kind:"two",size:4,eyes:[0,3]},size:6,rowStart:1,blacks:0,whites:12,blmask:0,whmask:0},{row:{kind:"two",size:4,eyes:[1,2]},size:6,rowStart:1,blacks:0,whites:18,blmask:0,whmask:0},{row:{kind:"two",size:4,eyes:[0,2]},size:6,rowStart:1,blacks:0,whites:20,blmask:0,whmask:0},{row:{kind:"two",size:4,eyes:[0,1]},size:6,rowStart:1,blacks:0,whites:24,blmask:0,whmask:0}],closedThree:[{row:{kind:"closedThree",size:5,eyes:[2,3]},size:5,rowStart:0,blacks:0,whites:19,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[1,3]},size:5,rowStart:0,blacks:0,whites:21,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[1,2]},size:5,rowStart:0,blacks:0,whites:25,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[3,4]},size:6,rowStart:1,blacks:1,whites:14,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[3,5]},size:6,rowStart:1,blacks:1,whites:22,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[2,5]},size:6,rowStart:1,blacks:1,whites:26,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[0,3]},size:6,rowStart:0,blacks:32,whites:22,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[0,2]},size:6,rowStart:0,blacks:32,whites:26,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[0,1]},size:6,rowStart:0,blacks:32,whites:28,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[1,5]},size:7,rowStart:1,blacks:65,whites:28,blmask:0,whmask:0}],three:[{row:{kind:"three",size:6,eyes:[4]},size:6,rowStart:0,blacks:0,whites:14,blmask:0,whmask:0},{row:{kind:"three",size:6,eyes:[3]},size:6,rowStart:0,blacks:0,whites:22,blmask:0,whmask:0},{row:{kind:"three",size:6,eyes:[2]},size:6,rowStart:0,blacks:0,whites:26,blmask:0,whmask:0},{row:{kind:"three",size:6,eyes:[1]},size:6,rowStart:0,blacks:0,whites:28,blmask:0,whmask:0}],four:[{row:{kind:"four",size:5,eyes:[4]},size:5,rowStart:0,blacks:0,whites:15,blmask:0,whmask:0},{row:{kind:"four",size:5,eyes:[3]},size:5,rowStart:0,blacks:0,whites:23,blmask:0,whmask:0},{row:{kind:"four",size:5,eyes:[2]},size:5,rowStart:0,blacks:0,whites:27,blmask:0,whmask:0},{row:{kind:"four",size:5,eyes:[1]},size:5,rowStart:0,blacks:0,whites:29,blmask:0,whmask:0},{row:{kind:"four",size:5,eyes:[0]},size:5,rowStart:0,blacks:0,whites:30,blmask:0,whmask:0}],five:[{row:{kind:"five",size:5,eyes:[]},size:5,rowStart:0,blacks:0,whites:31,blmask:0,whmask:0}],overline:[]},p=function(){function e(t){if(Object(l.a)(this,e),this.size=void 0,this.blacks=void 0,this.whites=void 0,this.rows=void 0,this.size=t.size,this.size<1||this.size>32)throw new Error("Wrong size");if("blacks"in t&&"whites"in t){if(0!==(t.blacks&t.whites))throw new Error("Black and white stones are overlapping");this.blacks=t.blacks,this.whites=t.whites}else this.blacks=0,this.whites=0;this.rows=new z(this.size,this.blacks,this.whites)}return Object(u.a)(e,[{key:"put",value:function(e,t){return this.overlay(e,1<<t)}},{key:"putMulti",value:function(e,t){for(var r=0,s=0;s<t.length;s++)r|=1<<t[s];return this.overlay(e,r)}},{key:"remove",value:function(t){var r=1<<t,s=[this.blacks&~r,this.whites&~r],i=s[0],n=s[1];return i===this.blacks&&n===this.whites?this:new e({size:this.size,blacks:i,whites:n})}},{key:"overlay",value:function(t,r){if(t){var s=[this.blacks|r,this.whites&~r],i=s[0],n=s[1];return i===this.blacks?this:new e({size:this.size,blacks:i,whites:n})}var a=this.whites|r,o=this.blacks&~r;return a===this.whites?this:new e({size:this.size,blacks:o,whites:a})}},{key:"toSting",value:function(){for(var e="",t=0;t<this.size;t++){var r=1<<t;e+=0!==(this.blacks&r)?"o":0!==(this.whites&r)?"x":"-"}return e}}]),e}(),z=function(){function e(t,r,s){Object(l.a)(this,e),this.size=void 0,this.blacks=void 0,this.whites=void 0,this.blackCache=void 0,this.whiteCache=void 0,this.size=t,this.blacks=r,this.whites=s,this.blackCache={two:void 0,closedThree:void 0,three:void 0,four:void 0,five:void 0,overline:void 0},this.whiteCache={two:void 0,closedThree:void 0,three:void 0,four:void 0,five:void 0,overline:void 0}}return Object(u.a)(e,[{key:"get",value:function(e,t){var r=e?this.blackCache:this.whiteCache;return void 0===r[t]&&(r[t]=this.compute(e,t)),r[t]}},{key:"compute",value:function(e,t){var r=e?v[t]:y[t],s=e?this.blacks<<1:g(this.blacks,this.size),i=e?g(this.whites,this.size):this.whites<<1,n=this.size+2;return r.flatMap((function(e){return function(e,t,r,s){if(r<s.size)return[];for(var i=Math.pow(2,s.size)-1,n=[],a=0;a<=r-s.size;a++)(e&i&~s.blmask)===s.blacks&&(t&i&~s.whmask)===s.whites&&n.push(a+s.rowStart),e>>>=1,t>>>=1;return n}(s,i,n,e).map((function(t){var r=t-1;return{kind:e.row.kind,start:r,size:e.row.size,eyes:e.row.eyes.map((function(e){return e+r}))}}))}))}}]),e}(),g=function(e,t){return e<<1|1|1<<t+1},E=function(){function e(t){Object(l.a)(this,e),this.size=void 0,this.facets=void 0,this.rows=void 0,this.size=t.size,this.facets="facets"in t?t.facets:[["vertical",O(this.size)],["horizontal",O(this.size)],["ascending",C(this.size)],["descending",C(this.size)]],this.rows=new x(this.size,this.facets)}return Object(u.a)(e,[{key:"put",value:function(t,r){var s=this.size,i=this.facets.map((function(e){var i=Object(o.a)(e,2),n=i[0],a=i[1],c=S(r,n,s),h=Object(o.a)(c,2),l=h[0],u=h[1],w=a[l].put(t,u);return[n,[].concat(Object(f.a)(a.slice(0,l)),[w],Object(f.a)(a.slice(l+1,a.length)))]}));return new e({size:this.size,facets:i})}},{key:"putMulti",value:function(t,r){var s=this.size,i=this.facets.map((function(e){for(var i=Object(o.a)(e,2),n=i[0],a=i[1],c=new Map,h=0;h<r.length;h++){var l=S(r[h],n,s),u=Object(o.a)(l,2),w=u[0],d=u[1];c.has(w)?c.get(w).push(d):c.set(w,[d])}return[n,a.map((function(e,r){return c.has(r)?e.putMulti(t,c.get(r)):e}))]}));return new e({size:this.size,facets:i})}},{key:"remove",value:function(t){var r=this.size,s=this.facets.map((function(e){var s=Object(o.a)(e,2),i=s[0],n=s[1],a=S(t,i,r),c=Object(o.a)(a,2),h=c[0],l=c[1],u=n[h].remove(l);return[i,[].concat(Object(f.a)(n.slice(0,h)),[u],Object(f.a)(n.slice(h+1,n.length)))]}));return new e({size:this.size,facets:s})}},{key:"toString",value:function(){return this.facets.find((function(e){var t=Object(o.a)(e,2),r=t[0];t[1];return"horizontal"===r}))[1].slice().reverse().map((function(e){return e.toSting()})).join("\n")}}]),e}(),S=function(e,t,r){var s,i=Object(o.a)(e,2),n=i[0],a=i[1];switch(t){case"vertical":return[n-1,a-1];case"horizontal":return[a-1,n-1];case"ascending":return[s=n-1+(r-a),s<r?n-1:a-1];case"descending":return[s=n-1+(a-1),s<r?n-1:r-a]}},j=function(e,t,r){var s=Object(o.a)(e,2),i=s[0],n=s[1];switch(t){case"vertical":return[i+1,n+1];case"horizontal":return[n+1,i+1];case"ascending":return[i<r?n+1:i+1+(n+1)-r,i<r?r-(i+1)+(n+1):n+1];case"descending":return[i<r?n+1:i+1+(n+1)-r,i<r?i+1-n:r-n]}},O=function(e){return new Array(e).fill(null).map((function(){return new p({size:e})}))},C=function(e){return new Array(2*e-1).fill(null).map((function(t,r){return new p({size:r<e?r+1:2*e-1-r})}))},x=function(){function e(t,r){Object(l.a)(this,e),this.size=void 0,this.facets=void 0,this.blackCache=void 0,this.whiteCache=void 0,this.size=t,this.facets=r,this.blackCache={two:void 0,closedThree:void 0,three:void 0,four:void 0,five:void 0,overline:void 0},this.whiteCache={two:void 0,closedThree:void 0,three:void 0,four:void 0,five:void 0,overline:void 0}}return Object(u.a)(e,[{key:"get",value:function(e,t){var r=e?this.blackCache:this.whiteCache;return void 0===r[t]&&(r[t]=this.compute(e,t)),r[t]}},{key:"compute",value:function(e,t){var r=this.size;return this.facets.flatMap((function(s){var i=Object(o.a)(s,2),n=i[0];return i[1].flatMap((function(s,i){return s.rows.get(e,t).map((function(e){return{kind:e.kind,direction:n,start:j([i,e.start],n,r),end:j([i,e.start+e.size-1],n,r),eyes:e.eyes.map((function(e){return j([i,e],n,r)}))}}))}))}))}}]),e}(),P=function(e,t){return F(e,t)?"overline":W(e,t)?"doubleFour":T(e,t)?"doubleThree":void 0},F=function(e,t){return e.put(!0,t).rows.get(!0,"overline").filter((function(e){return M(t,e)})).length>0},W=function(e,t){var r=e.put(!0,t).rows.get(!0,"four").filter((function(e){return M(t,e)}));return!(r.length<2)&&I(r).length>=2},T=function(e,t){var r=e.put(!0,t),s=r.rows.get(!0,"three").filter((function(e){return M(t,e)}));if(s.length<2)return!1;var i=s.filter((function(e){return!P(r,e.eyes[0])}));return!(i.length<2)&&I(i).length>=2},M=function(e,t){var r=[t.start,t.end],s=r[0],i=r[1];switch(t.direction){case"vertical":return e[0]===s[0]&&s[1]<=e[1]&&e[1]<=i[1];case"horizontal":return e[1]===s[1]&&s[0]<=e[0]&&e[0]<=i[0];case"ascending":return s[0]<=e[0]&&e[0]<=i[0]&&e[0]-s[0]===e[1]-s[1];case"descending":return s[0]<=e[0]&&e[0]<=i[0]&&e[0]-s[0]===s[1]-e[1]}},I=function(e){for(var t=[],r=function(r){var s=e[r];t.findIndex((function(e){return L(s,e)}))<0&&t.push(s)},s=0;s<e.length;s++)r(s);return t},L=function(e,t){if(e.direction!==t.direction)return!1;var r=e.start[0]-t.start[0],s=e.start[1]-t.start[1];switch(e.direction){case"vertical":return 0===r&&1===Math.abs(s);case"horizontal":return 1===Math.abs(r)&&0===s;case"ascending":return 1===Math.abs(r)&&r===s;case"descending":return 1===Math.abs(r)&&r===-s}},R=function(){function e(t){Object(l.a)(this,e),this.size=void 0,this.blacks=void 0,this.whites=void 0,this.properties=void 0,this.square=void 0,this.forbiddensCache=void 0,this.size=t.size,"blacks"in t&&"whites"in t?(this.blacks=t.blacks,this.whites=t.whites):(this.blacks=[],this.whites=[]),this.square="square"in t?t.square:new E({size:this.size}).putMulti(!0,this.blacks).putMulti(!1,this.whites),this.properties=new q(this.square)}return Object(u.a)(e,[{key:"put",value:function(t,r){return this.hasStone(r)?this:new e({size:this.size,blacks:t?[].concat(Object(f.a)(this.blacks),[r]):this.blacks,whites:t?this.whites:[].concat(Object(f.a)(this.whites),[r]),square:this.square.put(t,r)})}},{key:"remove",value:function(t){if(!this.hasStone(t))return this;var r=this.blacks.findIndex((function(e){return w(t,e)})),s=this.whites.findIndex((function(e){return w(t,e)}));return new e({size:this.size,blacks:r>=0?N(this.blacks,r):this.blacks,whites:s>=0?N(this.whites,s):this.whites,square:this.square.remove(t)})}},{key:"hasStone",value:function(e){return this.blacks.findIndex((function(t){return w(e,t)}))>=0||this.whites.findIndex((function(t){return w(e,t)}))>=0}},{key:"forbidden",value:function(e){return!this.hasStone(e)&&void 0!==P(this.square,e)}},{key:"computeForbiddens",value:function(){for(var e=[],t=1;t<=this.size;t++)for(var r=1;r<=this.size;r++)this.hasStone([t,r])||P(this.square,[t,r])&&e.push([t,r]);return e}},{key:"toString",value:function(){return this.square.toString()}},{key:"forbiddens",get:function(){return void 0===this.forbiddensCache&&(this.forbiddensCache=this.computeForbiddens()),this.forbiddensCache}}]),e}(),q=function(){function e(t){Object(l.a)(this,e),this.square=void 0,this.blackCache=void 0,this.whiteCache=void 0,this.square=t,this.blackCache={two:void 0,closedThree:void 0,three:void 0,four:void 0,five:void 0,overline:void 0},this.whiteCache={two:void 0,closedThree:void 0,three:void 0,four:void 0,five:void 0,overline:void 0}}return Object(u.a)(e,[{key:"get",value:function(e,t){var r=e?this.blackCache:this.whiteCache;return void 0===r[t]&&(r[t]=this.compute(e,t)),r[t]}},{key:"compute",value:function(e,t){return this.square.rows.get(e,t).map((function(e){return{kind:e.kind,start:e.start,end:e.end,eyes:e.eyes}}))}}]),e}(),N=function(e,t){return[].concat(Object(f.a)(e.slice(0,t)),Object(f.a)(e.slice(t+1,e.length)))},A=function(){function e(t){if(Object(l.a)(this,e),this.moves=void 0,"moves"in t)this.moves=t.moves;else if("code"in t){this.moves=[];for(var r=Array.from(t.code.matchAll(/[a-zA-Z][0-9]+/g)).map((function(e){return e[0]})),s=0;s<r.length;s++){var i=b(r[s]);if(void 0===i)throw new Error("invalid code: ".concat(r[s]));this.moves.push(i)}}else this.moves=[]}return Object(u.a)(e,[{key:"move",value:function(t){if(this.movable(t))return new e({moves:[].concat(Object(f.a)(this.moves),[t])})}},{key:"undo",value:function(){if(0!==this.moves.length)return new e({moves:this.moves.slice(0,this.moves.length-1)})}},{key:"movable",value:function(e){return this.moves.findIndex((function(t){return w(e,t)}))<0}},{key:"fork",value:function(t){return new e({moves:this.moves.slice(0,t)})}},{key:"code",get:function(){return this.moves.map(k).join("")}},{key:"blacks",get:function(){return this.moves.filter((function(e,t){return t%2===0}))}},{key:"whites",get:function(){return this.moves.filter((function(e,t){return t%2!==0}))}},{key:"isBlackTurn",get:function(){return this.moves.length%2===0}},{key:"isFirstTurn",get:function(){return this.isBlackTurn}}]),e}(),B=function(){function e(t){if(Object(l.a)(this,e),this.game=void 0,this.cursor=void 0,this.board=void 0,"game"in t)this.game=t.game,this.cursor=t.cursor,this.board=t.board;else if("code"in t){var r=t.code.split("/");if(2!==r.length)throw new Error("invalid code");var s=Object(o.a)(r,2),i=s[0],n=s[1];this.game=new A({code:i}),this.cursor=parseInt(n);var a=this.game.fork(this.cursor);this.board=new R({size:15,blacks:a.blacks,whites:a.whites})}else this.game=new A({}),this.cursor=0,this.board=new R({size:15})}return Object(u.a)(e,[{key:"move",value:function(t){if(!this.canMove)return this;if(this.game.isBlackTurn&&this.board.forbidden(t))return this;var r=this.game.move(t);return void 0===r?this:new e({game:r,board:this.board.put(this.game.isBlackTurn,t),cursor:this.cursor+1})}},{key:"undo",value:function(){if(!this.canUndo)return this;var t=this.game.undo();return void 0===t?this:new e({game:t,board:this.board.remove(this.game.moves[this.game.moves.length-1]),cursor:this.cursor-1})}},{key:"reset",value:function(){return this.canReset?new e({}):this}},{key:"forward",value:function(){return this.isLast?this:new e({game:this.game,board:this.board.put(this.cursor%2===0,this.game.moves[this.cursor]),cursor:this.cursor+1})}},{key:"backward",value:function(){return this.isStart?this:new e({game:this.game,board:this.board.remove(this.game.moves[this.cursor-1]),cursor:this.cursor-1})}},{key:"jump",value:function(t){if(t<0||this.game.moves.length<t)return this;var r=this.game.fork(t);return new e({game:this.game,board:new R({size:this.board.size,blacks:r.blacks,whites:r.whites}),cursor:t})}},{key:"toStart",value:function(){return this.jump(0)}},{key:"toLast",value:function(){return this.jump(this.game.moves.length)}},{key:"isStart",get:function(){return 0===this.cursor}},{key:"isLast",get:function(){return this.cursor===this.game.moves.length}},{key:"canMove",get:function(){return this.isLast}},{key:"canUndo",get:function(){return this.isLast&&!this.isStart}},{key:"canReset",get:function(){return this.game.moves.length>0}},{key:"moves",get:function(){return this.game.moves.slice(0,this.cursor)}},{key:"code",get:function(){return"".concat(this.game.code,"/").concat(this.cursor)}}]),e}(),D=Object(s.createContext)([new B({}),function(){}]),J=function(e){try{return new B({code:e.slice(1)})}catch(t){console.log("Invalid fragment: '".concat(e,"'"))}},U=r(45),G=r(65),H=r(66),K=function e(t){Object(l.a)(this,e),this.showIndices=!1,this.showOrders=!1,this.emphasizeLastMove=!1,this.showForbiddens=!1,this.showPropertyRows=!1,this.showPropertyEyes=!1,void 0!==t.showIndices&&(this.showIndices=t.showIndices),void 0!==t.showOrders&&(this.showOrders=t.showOrders),void 0!==t.emphasizeLastMove&&(this.emphasizeLastMove=t.emphasizeLastMove),void 0!==t.showForbiddens&&(this.showForbiddens=t.showForbiddens),void 0!==t.showPropertyRows&&(this.showPropertyRows=t.showPropertyRows),void 0!==t.showPropertyEyes&&(this.showPropertyEyes=t.showPropertyEyes)},V=Object(s.createContext)([new K({}),function(){}]),X=function(e){try{var t=JSON.parse(e);return new K(t)}catch(r){console.log("Invalid preference: '".concat(e,"'"))}},Y=function(){function e(t){Object(l.a)(this,e),this.N=15,this.W=void 0,this.C=void 0,this.P=void 0,t>=640?(this.W=640,this.C=40,this.P=40):t>=360?(this.W=360,this.C=24,this.P=12):(this.W=320,this.C=20,this.P=20)}return Object(u.a)(e,[{key:"cx",value:function(e){return this.P+(e-1)*this.C}},{key:"cy",value:function(e){return this.P+(this.N-e)*this.C}},{key:"c",value:function(e){var t=Object(o.a)(e,2),r=t[0],s=t[1];return[this.cx(r),this.cy(s)]}},{key:"p",value:function(e){var t=Object(o.a)(e,2),r=t[0],s=t[1];return[Z((r-this.P)/this.C+1),Z((this.W-s-this.P)/this.C+1)]}},{key:"xCode",value:function(e){return d(e)}},{key:"yCode",value:function(e){return m(e)}},{key:"code",value:function(e){var t=Object(o.a)(e,2),r=t[0],s=t[1];return k([r,s])}},{key:"indices",get:function(){return new Array(this.N).fill(null).map((function(e,t){return t+1}))}},{key:"buttonSize",get:function(){switch(this.W){case 320:case 360:return"sm";case 640:return"lg"}}},{key:"rulerStrokeWidth",get:function(){switch(this.W){case 320:case 360:return 1;case 640:return 2}}},{key:"stoneStrokeWidth",get:function(){switch(this.W){case 320:return 1.5;case 360:case 640:return 2}}},{key:"indexFontSize",get:function(){switch(this.W){case 320:case 360:return"8px";case 640:return"16px"}}},{key:"indexPadding",get:function(){switch(this.W){case 320:case 360:return 1;case 640:return 2}}},{key:"orderFontSize",get:function(){switch(this.W){case 320:case 360:return"12px";case 640:return"16px"}}},{key:"forbiddenStrokeWidth",get:function(){switch(this.W){case 320:case 360:return 4;case 640:return 5}}},{key:"propertyRowStrokeWidth",get:function(){switch(this.W){case 320:case 360:return 3;case 640:return 4}}},{key:"propertyRowStrokeDasharray",get:function(){switch(this.W){case 320:case 360:return"1 4";case 640:return"3 5"}}}]),e}(),Z=function(e){return Math.min(Math.max(1,Math.round(e)),15)},$=Object(s.createContext)(new Y(640)),Q=function(){var e=Object(s.useContext)($),t=e.indices.map((function(t,r){return i.a.createElement("line",{key:r,x1:e.cx(t),y1:e.cy(1),x2:e.cx(t),y2:e.cy(e.N),stroke:"darkgray",strokeWidth:e.rulerStrokeWidth})})),r=e.indices.map((function(t,r){return i.a.createElement("line",{key:r,x1:e.cx(1),y1:e.cy(t),x2:e.cx(e.N),y2:e.cy(t),stroke:"darkgray",strokeWidth:e.rulerStrokeWidth})}));return i.a.createElement("g",null,t,r)},_=function(){var e=Object(s.useContext)($);return i.a.createElement("g",null,[[4,4],[4,12],[8,8],[12,4],[12,12]].map((function(t,r){var s=Object(o.a)(t,2),n=s[0],a=s[1];return i.a.createElement("circle",{key:r,cx:e.cx(n),cy:e.cy(a),r:e.C/10,stroke:"none",fill:"gray"})})))},ee=function(){var e=Object(s.useContext)($),t=e.indices.map((function(t,r){return i.a.createElement("text",{key:r,x:e.cx(t),y:e.cy(1)+e.P-e.indexPadding,textAnchor:"middle",fill:"gray",fontSize:e.indexFontSize,fontFamily:"Noto Sans"},e.xCode(t))})),r=e.indices.map((function(t,r){return i.a.createElement("text",{key:r,x:3*e.P/10+e.indexPadding,y:e.cy(t),textAnchor:"middle",dominantBaseline:"central",fill:"gray",fontSize:e.indexFontSize,fontFamily:"Noto Sans"},e.yCode(t))}));return i.a.createElement("g",null,t,r)},te=function(e){var t=e.showIndices;return i.a.createElement("g",null,i.a.createElement(Q,null),i.a.createElement(_,null),t&&i.a.createElement(ee,null))},re=function(e){var t=e.points,r=Object(s.useContext)($),n=t.map((function(e,t){var s=r.c(e),n=Object(o.a)(s,2),a=n[0],c=n[1],h=2*r.C/10,l=a-h,u=a+h,w=c+h,d=c-h;return i.a.createElement("g",{key:t},i.a.createElement("line",{x1:l,y1:w,x2:u,y2:d,stroke:"red",strokeWidth:r.forbiddenStrokeWidth,opacity:"0.5"}),i.a.createElement("line",{x1:l,y1:d,x2:u,y2:w,stroke:"red",strokeWidth:r.forbiddenStrokeWidth,opacity:"0.5"}))}));return i.a.createElement("g",null,n)},se=function(e){var t=e.black,r=e.properties,n=Object(s.useContext)($),a=r.map((function(e,r){var s=n.c(e.start),a=Object(o.a)(s,2),c=a[0],h=a[1],l=n.c(e.end),u=Object(o.a)(l,2),w=u[0],d=u[1];return i.a.createElement("g",{key:r},(c===w||h===d)&&i.a.createElement("line",{x1:c,y1:h,x2:w,y2:d,stroke:"white",strokeWidth:n.propertyRowStrokeWidth,strokeLinecap:"butt",opacity:"0.6"}),i.a.createElement("line",{x1:c,y1:h,x2:w,y2:d,stroke:t?"blue":"darkgreen",strokeWidth:n.propertyRowStrokeWidth,strokeLinecap:"round",strokeDasharray:n.propertyRowStrokeDasharray,opacity:"0.4"}))}));return i.a.createElement("g",null,a)},ie=function(e){var t=e.black,r=e.properties,n=e.emphasized,a=Object(s.useContext)($),c=r.map((function(e,r){var s=e.eyes.map((function(e,r){var s=a.c(e),c=Object(o.a)(s,2),h=c[0],l=c[1],u=2*a.C/10;return n?i.a.createElement(ne,{key:r,cx:h,cy:l,r:u,fill:t?"blue":"darkgreen"}):i.a.createElement("circle",{key:r,cx:h,cy:l,r:u,stroke:"none",fillOpacity:"0.4",fill:t?"blue":"darkgreen"})}));return i.a.createElement("g",{key:r},s)}));return i.a.createElement("g",null,c)},ne=function(e){var t=e.fill,r=e.cx,s=e.cy,n=e.r;return i.a.createElement("g",{transform:"rotate(45, ".concat(r,", ").concat(s,")")},i.a.createElement("rect",{x:r-n,y:s-n,width:2*n,height:2*n,fill:t,stroke:"none",fillOpacity:"0.7"}))},ae=function(e){var t=e.board,r=e.showForbiddens,s=e.showPropertyRows,n=e.showPropertyEyes;return i.a.createElement("g",null,s&&i.a.createElement(i.a.Fragment,null,i.a.createElement(se,{black:!0,properties:t.properties.get(!0,"two")}),i.a.createElement(se,{black:!0,properties:t.properties.get(!0,"closedThree")}),i.a.createElement(se,{black:!1,properties:t.properties.get(!1,"two")}),i.a.createElement(se,{black:!1,properties:t.properties.get(!1,"closedThree")}),i.a.createElement(se,{black:!0,properties:t.properties.get(!0,"three")}),i.a.createElement(se,{black:!0,properties:t.properties.get(!0,"four")}),i.a.createElement(se,{black:!1,properties:t.properties.get(!1,"three")}),i.a.createElement(se,{black:!1,properties:t.properties.get(!1,"four")})),n&&i.a.createElement(i.a.Fragment,null,i.a.createElement(ie,{black:!0,properties:t.properties.get(!0,"three")}),i.a.createElement(ie,{black:!0,properties:t.properties.get(!0,"four"),emphasized:!0}),i.a.createElement(ie,{black:!1,properties:t.properties.get(!1,"three")}),i.a.createElement(ie,{black:!1,properties:t.properties.get(!1,"four"),emphasized:!0})),r&&i.a.createElement(re,{points:t.forbiddens}))},oe=function(e){var t=e.black,r=e.points.map((function(e,r){return i.a.createElement(he,{key:r,black:t,point:e})}));return i.a.createElement("g",null,r)},ce=function(e){var t=e.moves,r=Object(s.useContext)($),n=t.map((function(e,t){var s=Object(o.a)(e,2),n=s[0],a=s[1],c=t%2===0;return i.a.createElement("text",{key:t,x:r.cx(n),y:r.cy(a),fill:c?"whitesmoke":"dimgray",textAnchor:"middle",dominantBaseline:"central",fontSize:r.orderFontSize,fontFamily:"Noto Serif"},t+1)}));return i.a.createElement("g",null,n)},he=function(e){var t=e.black,r=e.point,n=Object(s.useContext)($),a=n.c(r),c=Object(o.a)(a,2),h=c[0],l=c[1],u=n.C/2*9/10;return i.a.createElement("circle",{cx:h,cy:l,r:u,strokeWidth:n.stoneStrokeWidth,stroke:"#333333",strokeOpacity:"0.7",fill:t?"#333333":"white"})},le=function(e){var t=e.point,r=Object(s.useContext)($),n=r.c(t),a=Object(o.a)(n,2),c=a[0],h=a[1],l=r.C/2*21/20;return i.a.createElement("circle",{cx:c,cy:h,r:l,fill:"violet"})},ue=function(e){var t=e.moves,r=e.stones,s=e.showOrders,n=e.emphasizeLastMove;if(void 0===t&&void 0===r)throw new Error("moves or stones required");if(void 0===t&&s)throw new Error("moves required to show orders");if(void 0===t&&n)throw new Error("moves required to emphasize last");var a=r?r.blacks:t.filter((function(e,t){return t%2===0})),o=r?r.whites:t.filter((function(e,t){return t%2===1}));return i.a.createElement("g",null,n&&t&&t.length>=1&&i.a.createElement(le,{point:t[t.length-1]}),i.a.createElement(oe,{black:!0,points:a}),i.a.createElement(oe,{black:!1,points:o}),t&&s&&i.a.createElement(ce,{moves:t}))},we=function(e){var t=e.id,r=e.board,n=e.moves,a=e.onClickPoint,o=Object(s.useContext)($),c=Object(s.useContext)(V)[0],h=a&&function(e){var t=e.currentTarget.getBoundingClientRect(),r=e.clientX-t.x,s=e.clientY-t.y;a(o.p([r,s]))};return i.a.createElement("svg",{id:t,className:"rjn-board",width:o.W,height:o.W,onClick:h},i.a.createElement(te,{showIndices:c.showIndices}),i.a.createElement(ae,{board:r,showForbiddens:c.showForbiddens,showPropertyRows:c.showPropertyRows,showPropertyEyes:c.showPropertyEyes}),i.a.createElement(ue,{moves:n,showOrders:c.showOrders,emphasizeLastMove:c.emphasizeLastMove}))},de=function(){var e=Object(s.useContext)(D),t=Object(o.a)(e,2),r=t[0],n=t[1];return i.a.createElement(we,{id:"main-board",onClickPoint:function(e){return n(r.move(e))},board:r.board,moves:r.moves})},me=r(64),ke=r(36),be=r(67),fe=r(17),ve=r(5),ye=function(){var e=document.getElementById("share-board"),t=(new XMLSerializer).serializeToString(e),r=new Image;r.src="data:image/svg+xml;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(t)));var s=document.createElement("canvas");s.width=e.width.baseVal.value,s.height=e.height.baseVal.value;var i=s.getContext("2d");i.fillStyle="white",i.fillRect(0,0,s.width,s.height),r.onload=function(){i.drawImage(r,0,0);var e=document.createElement("a");e.href=s.toDataURL("image/png"),e.setAttribute("download","renju-note.png"),e.dispatchEvent(new MouseEvent("click"))}},pe=function(e){var t=e.buttonSize,r=Object(s.useContext)(D)[0];return i.a.createElement(i.a.Fragment,null,i.a.createElement(me.a,{icon:fe.e,"aria-label":"share",onClick:ye,size:t,variant:"ghost"}),i.a.createElement(ve.a,{hidden:!0},i.a.createElement($.Provider,{value:new Y(640)},i.a.createElement(we,{id:"share-board",board:r.board,moves:r.moves}))))},ze=r(14),ge=r(68),Ee=r(69),Se=function(e){var t=e.buttonSize,r=Object(s.useContext)(V),n=Object(o.a)(r,2),a=n[0],c=n[1],h=a.showIndices&&a.showOrders&&a.emphasizeLastMove&&a.showForbiddens&&a.showPropertyRows&&a.showPropertyEyes;return i.a.createElement(be.a,{placement:"bottom"},i.a.createElement(be.e,null,i.a.createElement(me.a,{size:t,icon:fe.g,"aria-label":"preference",variant:"ghost"})),i.a.createElement(be.d,{zIndex:4},i.a.createElement(be.b,null),i.a.createElement(be.c,{fontFamily:"Noto Sans",fontWeight:"normal"},i.a.createElement(U.a,{justify:"space-between",align:"center"},i.a.createElement(ge.a,{htmlFor:"controller-preference-all"},"All"),i.a.createElement(Ee.a,{id:"controller-preference-all",isChecked:h,onChange:function(){c(h?{showIndices:!1,showOrders:!1,emphasizeLastMove:!1,showForbiddens:!1,showPropertyRows:!1,showPropertyEyes:!1}:{showIndices:!0,showOrders:!0,emphasizeLastMove:!0,showForbiddens:!0,showPropertyRows:!0,showPropertyEyes:!0})}})),i.a.createElement(U.a,{justify:"space-between",align:"center"},i.a.createElement(ge.a,{htmlFor:"controller-preference-show-indices"},"Line indices"),i.a.createElement(Ee.a,{id:"controller-preference-show-indices",isChecked:a.showIndices,onChange:function(){return c(Object(ze.a)(Object(ze.a)({},a),{},{showIndices:!a.showIndices}))}})),i.a.createElement(U.a,{justify:"space-between",align:"center"},i.a.createElement(ge.a,{htmlFor:"controller-preference-show-orders"},"Move orders"),i.a.createElement(Ee.a,{id:"controller-preference-show-orders",isChecked:a.showOrders,onChange:function(){return c(Object(ze.a)(Object(ze.a)({},a),{},{showOrders:!a.showOrders}))}})),i.a.createElement(U.a,{justify:"space-between",align:"center"},i.a.createElement(ge.a,{htmlFor:"controller-preference-emphasize-last-move"},"Last move"),i.a.createElement(Ee.a,{id:"controller-preference-emphasize-last-move",isChecked:a.emphasizeLastMove,onChange:function(){return c(Object(ze.a)(Object(ze.a)({},a),{},{emphasizeLastMove:!a.emphasizeLastMove}))}})),i.a.createElement(U.a,{justify:"space-between",align:"center"},i.a.createElement(ge.a,{htmlFor:"controller-preference-show-forbiddens"},"Forbiddens"),i.a.createElement(Ee.a,{id:"controller-preference-show-forbiddens",isChecked:a.showForbiddens,onChange:function(){return c(Object(ze.a)(Object(ze.a)({},a),{},{showForbiddens:!a.showForbiddens}))}})),i.a.createElement(U.a,{justify:"space-between",align:"center"},i.a.createElement(ge.a,{htmlFor:"controller-preference-show-property-eyes"},"Row eyes"),i.a.createElement(Ee.a,{id:"controller-preference-show-property-eyes",isChecked:a.showPropertyEyes,onChange:function(){return c(Object(ze.a)(Object(ze.a)({},a),{},{showPropertyEyes:!a.showPropertyEyes}))}})),i.a.createElement(U.a,{justify:"space-between",align:"center"},i.a.createElement(ge.a,{htmlFor:"controller-preference-show-property-rows"},"Row lines"),i.a.createElement(Ee.a,{id:"controller-preference-show-property-rows",isChecked:a.showPropertyRows,onChange:function(){return c(Object(ze.a)(Object(ze.a)({},a),{},{showPropertyRows:!a.showPropertyRows}))}})))))},je=function(e){var t=e.buttonSize,r=Object(s.useContext)(D),n=Object(o.a)(r,2),a=n[0],c=n[1];return i.a.createElement(be.a,{placement:"bottom"},(function(e){var r=e.onClose;return i.a.createElement(i.a.Fragment,null,i.a.createElement(be.e,null,i.a.createElement(me.a,{icon:fe.f,"aria-label":"reset",size:t,variant:"ghost",isDisabled:!a.canReset})),i.a.createElement(be.d,{zIndex:4,width:16},i.a.createElement(be.b,null),i.a.createElement(ke.a,{as:"button",size:"sm",variant:"ghost",variantColor:"red",fontFamily:"Noto Sans",fontWeight:"normal",onClick:function(){c(a.reset()),r&&r()}},"RESET")))}))},Oe=function(){var e=Object(s.useContext)($),t=Object(s.useContext)(D),r=Object(o.a)(t,2),n=r[0],a=r[1];return i.a.createElement(U.a,{width:e.W,justifyContent:"space-around",alignItems:"center"},i.a.createElement(Se,{buttonSize:e.buttonSize}),i.a.createElement(je,{buttonSize:e.buttonSize}),i.a.createElement(U.a,{justifyContent:"center",alignItems:"center"},i.a.createElement(me.a,{onClick:function(){return a(n.toStart())},icon:fe.c,"aria-label":"to start",size:e.buttonSize,variant:"ghost",isDisabled:n.isStart}),i.a.createElement(me.a,{onClick:function(){return a(n.backward())},icon:fe.a,"aria-label":"backward",size:e.buttonSize,variant:"ghost",isDisabled:n.isStart}),i.a.createElement(ke.a,{width:6,size:e.buttonSize,variant:"ghost",fontFamily:"Noto Serif",fontWeight:"normal",isDisabled:!0},n.cursor),i.a.createElement(me.a,{onClick:function(){return a(n.forward())},icon:fe.b,"aria-label":"forward",size:e.buttonSize,variant:"ghost",isDisabled:n.isLast}),i.a.createElement(me.a,{onClick:function(){return a(n.toLast())},icon:fe.d,"aria-label":"to last",size:e.buttonSize,variant:"ghost",isDisabled:n.isLast})),i.a.createElement(me.a,{onClick:function(){return a(n.undo())},icon:fe.h,"aria-label":"undo",size:e.buttonSize,variant:"ghost",isDisabled:!n.canUndo}),i.a.createElement(pe,{buttonSize:e.buttonSize}))},Ce=function(){return i.a.createElement(U.a,{justify:"center"},i.a.createElement(G.a,{spacing:4,my:2},i.a.createElement(U.a,{justify:"center",align:"center"},i.a.createElement(H.a,{as:"h1",textAlign:"center",fontFamily:"Noto Sans",fontWeight:"normal",color:"gray.500"},"Renju Note BETA")),i.a.createElement(U.a,{justify:"center",align:"center"},i.a.createElement(de,null)),i.a.createElement(U.a,{justify:"center",align:"center"},i.a.createElement(Oe,null))))},xe=function(){var e=new Y(window.innerWidth),t=function(){var e=J(window.location.hash)||new B({}),t=Object(s.useState)(e),r=Object(o.a)(t,2),i=r[0],n=r[1];return[i,function(e){n(e),window.history.replaceState(null,"","#".concat(e.code))}]}(),r=Object(o.a)(t,2),n=r[0],a=r[1];Object(s.useEffect)((function(){return a(n)}),[n]);var l=function(){var e=X(localStorage.getItem("preference")||"{}")||new K({}),t=Object(s.useState)(e),r=Object(o.a)(t,2),i=r[0],n=r[1];return[i,function(e){n(e),localStorage.setItem("preference",JSON.stringify(e))}]}(),u=Object(o.a)(l,2),w=u[0],d=u[1];return Object(s.useEffect)((function(){return d(w)}),[w]),i.a.createElement(c.a,null,i.a.createElement(h.a,null),i.a.createElement($.Provider,{value:e},i.a.createElement(D.Provider,{value:[n,a]},i.a.createElement(V.Provider,{value:[w,d]},i.a.createElement(Ce,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(xe,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.d7b7c48a.chunk.js.map