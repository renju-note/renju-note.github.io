(this.webpackJsonprenju=this.webpackJsonprenju||[]).push([[0],{46:function(e,t,s){e.exports=s(62)},51:function(e,t,s){},52:function(e,t,s){},62:function(e,t,s){"use strict";s.r(t);var r=s(0),i=s.n(r),a=s(26),n=s.n(a),o=(s(51),s(34)),c=s(70),h=(s(52),s(3)),l=s(45),u=s(65),w=s(66),m=s(10),d=function e(t){Object(m.a)(this,e),this.showIndices=!1,this.showOrders=!1,this.emphasizeLastMove=!1,this.showForbiddens=!1,this.showPropertyRows=!1,this.showPropertyEyes=!1,void 0!==t.showIndices&&(this.showIndices=t.showIndices),void 0!==t.showOrders&&(this.showOrders=t.showOrders),void 0!==t.emphasizeLastMove&&(this.emphasizeLastMove=t.emphasizeLastMove),void 0!==t.showForbiddens&&(this.showForbiddens=t.showForbiddens),void 0!==t.showPropertyRows&&(this.showPropertyRows=t.showPropertyRows),void 0!==t.showPropertyEyes&&(this.showPropertyEyes=t.showPropertyEyes)},k=Object(r.createContext)([new d({}),function(){}]),b=function(e){try{var t=JSON.parse(e);return new d(t)}catch(s){return console.log("Invalid preference: '".concat(e,"'")),new d({})}},f=s(11),v=function(e,t){return e[0]===t[0]&&e[1]===t[1]},y=function(e){return"ABCDEFGHIJKLMNO".charAt(e-1)},p=function(e){return e.toString()},z=function(e){var t=Object(h.a)(e,2),s=t[0],r=t[1];return"".concat(y(s)).concat(p(r))},g=function(e){var t="ABCDEFGHIJKLMNO".indexOf(e[0].toUpperCase())+1,s=parseInt(e.slice(1));if(!(t<1||15<t||s<1||15<s))return[t,s]},E=s(16),j={two:[{row:{kind:"two",size:4,eyes:[2,3]},size:8,rowStart:2,blacks:12,whites:0,blmask:0,whmask:129},{row:{kind:"two",size:4,eyes:[1,3]},size:8,rowStart:2,blacks:20,whites:0,blmask:0,whmask:129},{row:{kind:"two",size:4,eyes:[0,3]},size:8,rowStart:2,blacks:24,whites:0,blmask:0,whmask:129},{row:{kind:"two",size:4,eyes:[1,2]},size:8,rowStart:2,blacks:36,whites:0,blmask:0,whmask:129},{row:{kind:"two",size:4,eyes:[0,2]},size:8,rowStart:2,blacks:40,whites:0,blmask:0,whmask:129},{row:{kind:"two",size:4,eyes:[0,1]},size:8,rowStart:2,blacks:48,whites:0,blmask:0,whmask:129}],closedThree:[{row:{kind:"closedThree",size:5,eyes:[2,3]},size:7,rowStart:1,blacks:38,whites:0,blmask:0,whmask:65},{row:{kind:"closedThree",size:5,eyes:[1,3]},size:7,rowStart:1,blacks:42,whites:0,blmask:0,whmask:65},{row:{kind:"closedThree",size:5,eyes:[1,2]},size:7,rowStart:1,blacks:50,whites:0,blmask:0,whmask:65},{row:{kind:"closedThree",size:5,eyes:[3,4]},size:7,rowStart:1,blacks:14,whites:1,blmask:0,whmask:64},{row:{kind:"closedThree",size:5,eyes:[3,5]},size:7,rowStart:1,blacks:22,whites:1,blmask:0,whmask:64},{row:{kind:"closedThree",size:5,eyes:[2,5]},size:7,rowStart:1,blacks:26,whites:1,blmask:0,whmask:64},{row:{kind:"closedThree",size:5,eyes:[0,3]},size:7,rowStart:1,blacks:44,whites:64,blmask:0,whmask:1},{row:{kind:"closedThree",size:5,eyes:[0,2]},size:7,rowStart:1,blacks:52,whites:64,blmask:0,whmask:1},{row:{kind:"closedThree",size:5,eyes:[0,1]},size:7,rowStart:1,blacks:56,whites:64,blmask:0,whmask:1},{row:{kind:"closedThree",size:5,eyes:[1,5]},size:7,rowStart:1,blacks:28,whites:65,blmask:0,whmask:0}],three:[{row:{kind:"three",size:6,eyes:[4]},size:8,rowStart:1,blacks:28,whites:0,blmask:0,whmask:129},{row:{kind:"three",size:6,eyes:[3]},size:8,rowStart:1,blacks:44,whites:0,blmask:0,whmask:129},{row:{kind:"three",size:6,eyes:[2]},size:8,rowStart:1,blacks:52,whites:0,blmask:0,whmask:129},{row:{kind:"three",size:6,eyes:[1]},size:8,rowStart:1,blacks:56,whites:0,blmask:0,whmask:129}],four:[{row:{kind:"four",size:5,eyes:[4]},size:7,rowStart:1,blacks:30,whites:0,blmask:0,whmask:65},{row:{kind:"four",size:5,eyes:[3]},size:7,rowStart:1,blacks:46,whites:0,blmask:0,whmask:65},{row:{kind:"four",size:5,eyes:[2]},size:7,rowStart:1,blacks:54,whites:0,blmask:0,whmask:65},{row:{kind:"four",size:5,eyes:[1]},size:7,rowStart:1,blacks:58,whites:0,blmask:0,whmask:65},{row:{kind:"four",size:5,eyes:[0]},size:7,rowStart:1,blacks:60,whites:0,blmask:0,whmask:65}],five:[{row:{kind:"five",size:5,eyes:[]},size:7,rowStart:1,blacks:62,whites:0,blmask:0,whmask:65}],overline:[{row:{kind:"overline",size:6,eyes:[]},size:6,rowStart:0,blacks:63,whites:0,blmask:0,whmask:0}]},S={two:[{row:{kind:"two",size:4,eyes:[2,3]},size:6,rowStart:1,blacks:0,whites:6,blmask:0,whmask:0},{row:{kind:"two",size:4,eyes:[1,3]},size:6,rowStart:1,blacks:0,whites:10,blmask:0,whmask:0},{row:{kind:"two",size:4,eyes:[0,3]},size:6,rowStart:1,blacks:0,whites:12,blmask:0,whmask:0},{row:{kind:"two",size:4,eyes:[1,2]},size:6,rowStart:1,blacks:0,whites:18,blmask:0,whmask:0},{row:{kind:"two",size:4,eyes:[0,2]},size:6,rowStart:1,blacks:0,whites:20,blmask:0,whmask:0},{row:{kind:"two",size:4,eyes:[0,1]},size:6,rowStart:1,blacks:0,whites:24,blmask:0,whmask:0}],closedThree:[{row:{kind:"closedThree",size:5,eyes:[2,3]},size:5,rowStart:0,blacks:0,whites:19,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[1,3]},size:5,rowStart:0,blacks:0,whites:21,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[1,2]},size:5,rowStart:0,blacks:0,whites:25,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[3,4]},size:6,rowStart:1,blacks:1,whites:14,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[3,5]},size:6,rowStart:1,blacks:1,whites:22,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[2,5]},size:6,rowStart:1,blacks:1,whites:26,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[0,3]},size:6,rowStart:0,blacks:32,whites:22,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[0,2]},size:6,rowStart:0,blacks:32,whites:26,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[0,1]},size:6,rowStart:0,blacks:32,whites:28,blmask:0,whmask:0},{row:{kind:"closedThree",size:5,eyes:[1,5]},size:7,rowStart:1,blacks:65,whites:28,blmask:0,whmask:0}],three:[{row:{kind:"three",size:6,eyes:[4]},size:6,rowStart:0,blacks:0,whites:14,blmask:0,whmask:0},{row:{kind:"three",size:6,eyes:[3]},size:6,rowStart:0,blacks:0,whites:22,blmask:0,whmask:0},{row:{kind:"three",size:6,eyes:[2]},size:6,rowStart:0,blacks:0,whites:26,blmask:0,whmask:0},{row:{kind:"three",size:6,eyes:[1]},size:6,rowStart:0,blacks:0,whites:28,blmask:0,whmask:0}],four:[{row:{kind:"four",size:5,eyes:[4]},size:5,rowStart:0,blacks:0,whites:15,blmask:0,whmask:0},{row:{kind:"four",size:5,eyes:[3]},size:5,rowStart:0,blacks:0,whites:23,blmask:0,whmask:0},{row:{kind:"four",size:5,eyes:[2]},size:5,rowStart:0,blacks:0,whites:27,blmask:0,whmask:0},{row:{kind:"four",size:5,eyes:[1]},size:5,rowStart:0,blacks:0,whites:29,blmask:0,whmask:0},{row:{kind:"four",size:5,eyes:[0]},size:5,rowStart:0,blacks:0,whites:30,blmask:0,whmask:0}],five:[{row:{kind:"five",size:5,eyes:[]},size:5,rowStart:0,blacks:0,whites:31,blmask:0,whmask:0}],overline:[]},O=function(){function e(t){if(Object(m.a)(this,e),this.size=void 0,this.blacks=void 0,this.whites=void 0,this.rows=void 0,this.size=t.size,this.size<1||this.size>32)throw new Error("Wrong size");if("blacks"in t&&"whites"in t){if(0!==(t.blacks&t.whites))throw new Error("Black and white stones are overlapping");this.blacks=t.blacks,this.whites=t.whites}else this.blacks=0,this.whites=0;this.rows=new C(this.size,this.blacks,this.whites)}return Object(f.a)(e,[{key:"put",value:function(e,t){return this.overlay(e,1<<t)}},{key:"putMulti",value:function(e,t){for(var s=0,r=0;r<t.length;r++)s|=1<<t[r];return this.overlay(e,s)}},{key:"remove",value:function(t){var s=1<<t,r=[this.blacks&~s,this.whites&~s],i=r[0],a=r[1];return i===this.blacks&&a===this.whites?this:new e({size:this.size,blacks:i,whites:a})}},{key:"overlay",value:function(t,s){if(t){var r=[this.blacks|s,this.whites&~s],i=r[0],a=r[1];return i===this.blacks?this:new e({size:this.size,blacks:i,whites:a})}var n=this.whites|s,o=this.blacks&~s;return n===this.whites?this:new e({size:this.size,blacks:o,whites:n})}},{key:"toSting",value:function(){for(var e="",t=0;t<this.size;t++){var s=1<<t;e+=0!==(this.blacks&s)?"o":0!==(this.whites&s)?"x":"-"}return e}}]),e}(),C=function(){function e(t,s,r){Object(m.a)(this,e),this.size=void 0,this.blacks=void 0,this.whites=void 0,this.blackCache=void 0,this.whiteCache=void 0,this.size=t,this.blacks=s,this.whites=r,this.blackCache={two:void 0,closedThree:void 0,three:void 0,four:void 0,five:void 0,overline:void 0},this.whiteCache={two:void 0,closedThree:void 0,three:void 0,four:void 0,five:void 0,overline:void 0}}return Object(f.a)(e,[{key:"get",value:function(e,t){var s=e?this.blackCache:this.whiteCache;return void 0===s[t]&&(s[t]=this.compute(e,t)),s[t]}},{key:"compute",value:function(e,t){var s=e?j[t]:S[t],r=e?this.blacks<<1:x(this.blacks,this.size),i=e?x(this.whites,this.size):this.whites<<1,a=this.size+2;return s.flatMap((function(e){return function(e,t,s,r){if(s<r.size)return[];for(var i=Math.pow(2,r.size)-1,a=[],n=0;n<=s-r.size;n++)(e&i&~r.blmask)===r.blacks&&(t&i&~r.whmask)===r.whites&&a.push(n+r.rowStart),e>>>=1,t>>>=1;return a}(r,i,a,e).map((function(t){var s=t-1;return{kind:e.row.kind,start:s,size:e.row.size,eyes:e.row.eyes.map((function(e){return e+s}))}}))}))}}]),e}(),x=function(e,t){return e<<1|1|1<<t+1},T=function(){function e(t){Object(m.a)(this,e),this.size=void 0,this.facets=void 0,this.rows=void 0,this.size=t.size,this.facets="facets"in t?t.facets:[["vertical",N(this.size)],["horizontal",N(this.size)],["ascending",F(this.size)],["descending",F(this.size)]],this.rows=new I(this.size,this.facets)}return Object(f.a)(e,[{key:"put",value:function(t,s){var r=this.size,i=this.facets.map((function(e){var i=Object(h.a)(e,2),a=i[0],n=i[1],o=P(s,a,r),c=Object(h.a)(o,2),l=c[0],u=c[1],w=n[l].put(t,u);return[a,[].concat(Object(E.a)(n.slice(0,l)),[w],Object(E.a)(n.slice(l+1,n.length)))]}));return new e({size:this.size,facets:i})}},{key:"putMulti",value:function(t,s){var r=this.size,i=this.facets.map((function(e){for(var i=Object(h.a)(e,2),a=i[0],n=i[1],o=new Map,c=0;c<s.length;c++){var l=P(s[c],a,r),u=Object(h.a)(l,2),w=u[0],m=u[1];o.has(w)?o.get(w).push(m):o.set(w,[m])}return[a,n.map((function(e,s){return o.has(s)?e.putMulti(t,o.get(s)):e}))]}));return new e({size:this.size,facets:i})}},{key:"remove",value:function(t){var s=this.size,r=this.facets.map((function(e){var r=Object(h.a)(e,2),i=r[0],a=r[1],n=P(t,i,s),o=Object(h.a)(n,2),c=o[0],l=o[1],u=a[c].remove(l);return[i,[].concat(Object(E.a)(a.slice(0,c)),[u],Object(E.a)(a.slice(c+1,a.length)))]}));return new e({size:this.size,facets:r})}},{key:"toString",value:function(){return this.facets.find((function(e){var t=Object(h.a)(e,2),s=t[0];t[1];return"horizontal"===s}))[1].slice().reverse().map((function(e){return e.toSting()})).join("\n")}}]),e}(),P=function(e,t,s){var r,i=Object(h.a)(e,2),a=i[0],n=i[1];switch(t){case"vertical":return[a-1,n-1];case"horizontal":return[n-1,a-1];case"ascending":return[r=a-1+(s-n),r<s?a-1:n-1];case"descending":return[r=a-1+(n-1),r<s?a-1:s-n]}},M=function(e,t,s){var r=Object(h.a)(e,2),i=r[0],a=r[1];switch(t){case"vertical":return[i+1,a+1];case"horizontal":return[a+1,i+1];case"ascending":return[i<s?a+1:i+1+(a+1)-s,i<s?s-(i+1)+(a+1):a+1];case"descending":return[i<s?a+1:i+1+(a+1)-s,i<s?i+1-a:s-a]}},N=function(e){return new Array(e).fill(null).map((function(){return new O({size:e})}))},F=function(e){return new Array(2*e-1).fill(null).map((function(t,s){return new O({size:s<e?s+1:2*e-1-s})}))},I=function(){function e(t,s){Object(m.a)(this,e),this.size=void 0,this.facets=void 0,this.blackCache=void 0,this.whiteCache=void 0,this.size=t,this.facets=s,this.blackCache={two:void 0,closedThree:void 0,three:void 0,four:void 0,five:void 0,overline:void 0},this.whiteCache={two:void 0,closedThree:void 0,three:void 0,four:void 0,five:void 0,overline:void 0}}return Object(f.a)(e,[{key:"get",value:function(e,t){var s=e?this.blackCache:this.whiteCache;return void 0===s[t]&&(s[t]=this.compute(e,t)),s[t]}},{key:"compute",value:function(e,t){var s=this.size;return this.facets.flatMap((function(r){var i=Object(h.a)(r,2),a=i[0];return i[1].flatMap((function(r,i){return r.rows.get(e,t).map((function(e){return{kind:e.kind,direction:a,start:M([i,e.start],a,s),end:M([i,e.start+e.size-1],a,s),eyes:e.eyes.map((function(e){return M([i,e],a,s)}))}}))}))}))}}]),e}(),L=function(e,t){return R(e,t)?"overline":q(e,t)?"doubleFour":W(e,t)?"doubleThree":void 0},R=function(e,t){return e.put(!0,t).rows.get(!0,"overline").filter((function(e){return B(t,e)})).length>0},q=function(e,t){var s=e.put(!0,t).rows.get(!0,"four").filter((function(e){return B(t,e)}));return!(s.length<2)&&A(s).length>=2},W=function(e,t){var s=e.put(!0,t),r=s.rows.get(!0,"three").filter((function(e){return B(t,e)}));if(r.length<2)return!1;var i=r.filter((function(e){return!L(s,e.eyes[0])}));return!(i.length<2)&&A(i).length>=2},B=function(e,t){var s=[t.start,t.end],r=s[0],i=s[1];switch(t.direction){case"vertical":return e[0]===r[0]&&r[1]<=e[1]&&e[1]<=i[1];case"horizontal":return e[1]===r[1]&&r[0]<=e[0]&&e[0]<=i[0];case"ascending":return r[0]<=e[0]&&e[0]<=i[0]&&e[0]-r[0]===e[1]-r[1];case"descending":return r[0]<=e[0]&&e[0]<=i[0]&&e[0]-r[0]===r[1]-e[1]}},A=function(e){for(var t=[],s=function(s){var r=e[s];t.findIndex((function(e){return D(r,e)}))<0&&t.push(r)},r=0;r<e.length;r++)s(r);return t},D=function(e,t){if(e.direction!==t.direction)return!1;var s=e.start[0]-t.start[0],r=e.start[1]-t.start[1];switch(e.direction){case"vertical":return 0===s&&1===Math.abs(r);case"horizontal":return 1===Math.abs(s)&&0===r;case"ascending":return 1===Math.abs(s)&&s===r;case"descending":return 1===Math.abs(s)&&s===-r}},J=function(){function e(t){Object(m.a)(this,e),this.size=void 0,this.blacks=void 0,this.whites=void 0,this.properties=void 0,this.square=void 0,this.forbiddensCache=void 0,this.size=t.size,"blacks"in t&&"whites"in t?(this.blacks=t.blacks,this.whites=t.whites):(this.blacks=[],this.whites=[]),this.square="square"in t?t.square:new T({size:this.size}).putMulti(!0,this.blacks).putMulti(!1,this.whites),this.properties=new U(this.square)}return Object(f.a)(e,[{key:"put",value:function(t,s){return this.hasStone(s)?this:new e({size:this.size,blacks:t?[].concat(Object(E.a)(this.blacks),[s]):this.blacks,whites:t?this.whites:[].concat(Object(E.a)(this.whites),[s]),square:this.square.put(t,s)})}},{key:"remove",value:function(t){if(!this.hasStone(t))return this;var s=this.blacks.findIndex((function(e){return v(t,e)})),r=this.whites.findIndex((function(e){return v(t,e)}));return new e({size:this.size,blacks:s>=0?G(this.blacks,s):this.blacks,whites:r>=0?G(this.whites,r):this.whites,square:this.square.remove(t)})}},{key:"hasStone",value:function(e){return this.blacks.findIndex((function(t){return v(e,t)}))>=0||this.whites.findIndex((function(t){return v(e,t)}))>=0}},{key:"forbidden",value:function(e){return!this.hasStone(e)&&void 0!==L(this.square,e)}},{key:"computeForbiddens",value:function(){for(var e=[],t=1;t<=this.size;t++)for(var s=1;s<=this.size;s++)this.hasStone([t,s])||L(this.square,[t,s])&&e.push([t,s]);return e}},{key:"toString",value:function(){return this.square.toString()}},{key:"forbiddens",get:function(){return void 0===this.forbiddensCache&&(this.forbiddensCache=this.computeForbiddens()),this.forbiddensCache}}]),e}(),U=function(){function e(t){Object(m.a)(this,e),this.square=void 0,this.blackCache=void 0,this.whiteCache=void 0,this.square=t,this.blackCache={two:void 0,closedThree:void 0,three:void 0,four:void 0,five:void 0,overline:void 0},this.whiteCache={two:void 0,closedThree:void 0,three:void 0,four:void 0,five:void 0,overline:void 0}}return Object(f.a)(e,[{key:"get",value:function(e,t){var s=e?this.blackCache:this.whiteCache;return void 0===s[t]&&(s[t]=this.compute(e,t)),s[t]}},{key:"compute",value:function(e,t){return this.square.rows.get(e,t).map((function(e){return{kind:e.kind,start:e.start,end:e.end,eyes:e.eyes}}))}}]),e}(),G=function(e,t){return[].concat(Object(E.a)(e.slice(0,t)),Object(E.a)(e.slice(t+1,e.length)))},H=function(){function e(t){if(Object(m.a)(this,e),this.moves=void 0,"moves"in t)this.moves=t.moves;else if("code"in t){this.moves=[];for(var s=Array.from(t.code.matchAll(/[a-zA-Z][0-9]+/g)).map((function(e){return e[0]})),r=0;r<s.length;r++){var i=g(s[r]);if(void 0===i)throw new Error("invalid code: ".concat(s[r]));this.moves.push(i)}}else this.moves=[]}return Object(f.a)(e,[{key:"move",value:function(t){if(this.movable(t))return new e({moves:[].concat(Object(E.a)(this.moves),[t])})}},{key:"undo",value:function(){if(0!==this.moves.length)return new e({moves:this.moves.slice(0,this.moves.length-1)})}},{key:"movable",value:function(e){return this.moves.findIndex((function(t){return v(e,t)}))<0}},{key:"fork",value:function(t){return new e({moves:this.moves.slice(0,t)})}},{key:"code",get:function(){return this.moves.map(z).join("")}},{key:"blacks",get:function(){return this.moves.filter((function(e,t){return t%2===0}))}},{key:"whites",get:function(){return this.moves.filter((function(e,t){return t%2!==0}))}},{key:"isBlackTurn",get:function(){return this.moves.length%2===0}},{key:"isFirstTurn",get:function(){return this.isBlackTurn}}]),e}(),K=function(){function e(t){Object(m.a)(this,e),this.N=15,this.W=void 0,this.C=void 0,this.P=void 0,t>=640?(this.W=640,this.C=40,this.P=40):t>=360?(this.W=360,this.C=24,this.P=12):(this.W=320,this.C=20,this.P=20)}return Object(f.a)(e,[{key:"cx",value:function(e){return this.P+(e-1)*this.C}},{key:"cy",value:function(e){return this.P+(this.N-e)*this.C}},{key:"c",value:function(e){var t=Object(h.a)(e,2),s=t[0],r=t[1];return[this.cx(s),this.cy(r)]}},{key:"p",value:function(e){var t=Object(h.a)(e,2),s=t[0],r=t[1];return[X((s-this.P)/this.C+1),X((this.W-r-this.P)/this.C+1)]}},{key:"className",value:function(e){return e?"black":"white"}},{key:"xCode",value:function(e){return y(e)}},{key:"yCode",value:function(e){return p(e)}},{key:"code",value:function(e){var t=Object(h.a)(e,2),s=t[0],r=t[1];return z([s,r])}},{key:"indices",get:function(){return new Array(this.N).fill(null).map((function(e,t){return t+1}))}},{key:"buttonSize",get:function(){switch(this.W){case 320:case 360:return"sm";case 640:return"lg"}}}]),e}(),X=function(e){return Math.min(Math.max(1,Math.round(e)),15)},Y=Object(r.createContext)(new K(640)),Z=function(){var e=Object(r.useContext)(Y),t=e.indices.map((function(t,s){return i.a.createElement("line",{key:s,className:"ruler",x1:e.cx(t),y1:e.cy(1),x2:e.cx(t),y2:e.cy(e.N)})})),s=e.indices.map((function(t,s){return i.a.createElement("line",{key:s,className:"ruler",x1:e.cx(1),y1:e.cy(t),x2:e.cx(e.N),y2:e.cy(t)})}));return i.a.createElement("g",null,t,s)},$=function(){var e=Object(r.useContext)(Y);return i.a.createElement("g",null,[[4,4],[4,12],[8,8],[12,4],[12,12]].map((function(t,s){var r=Object(h.a)(t,2),a=r[0],n=r[1];return i.a.createElement("circle",{key:s,className:"star",cx:e.cx(a),cy:e.cy(n),r:e.C/10})})))},Q=function(){var e=Object(r.useContext)(Y),t=e.indices.map((function(t,s){return i.a.createElement("text",{className:"index",key:s,x:e.cx(t),y:e.cy(1)+e.P},e.xCode(t))})),s=e.indices.map((function(t,s){return i.a.createElement("text",{className:"index",key:s,x:3*e.P/10,y:e.cy(t),dominantBaseline:"central"},e.yCode(t))}));return i.a.createElement("g",null,t,s)},V=function(e){var t=e.showIndices;return i.a.createElement("g",null,i.a.createElement(Z,null),i.a.createElement($,null),t&&i.a.createElement(Q,null))},_=function(e){var t=e.points,s=Object(r.useContext)(Y),a=t.map((function(e,t){var r=s.c(e),a=Object(h.a)(r,2),n=a[0],o=a[1],c=2*s.C/10,l=n-c,u=n+c,w=o+c,m=o-c;return i.a.createElement("g",{key:t},i.a.createElement("line",{className:"forbidden",x1:l,y1:w,x2:u,y2:m}),i.a.createElement("line",{className:"forbidden",x1:l,y1:m,x2:u,y2:w}))}));return i.a.createElement("g",null,a)},ee=function(e){var t=e.black,s=e.properties,a=Object(r.useContext)(Y),n=s.map((function(e,s){var r=a.c(e.start),n=Object(h.a)(r,2),o=n[0],c=n[1],l=a.c(e.end),u=Object(h.a)(l,2),w=u[0],m=u[1];return i.a.createElement("g",{key:s},(o===w||c===m)&&i.a.createElement("line",{className:"propertyRowUnderlay",x1:o,y1:c,x2:w,y2:m}),i.a.createElement("line",{className:"propertyRow ".concat(a.className(t)),x1:o,y1:c,x2:w,y2:m}))}));return i.a.createElement("g",null,n)},te=function(e){var t=e.black,s=e.properties,a=e.emphasized,n=Object(r.useContext)(Y),o=s.map((function(e,s){var r=e.eyes.map((function(e,s){var r=n.c(e),o=Object(h.a)(r,2),c=o[0],l=o[1],u=2*n.C/10;return a?i.a.createElement(se,{key:s,className:"propertyEye ".concat(n.className(t)," emphasized"),cx:c,cy:l,r:u}):i.a.createElement("circle",{key:s,className:"propertyEye ".concat(n.className(t)),cx:c,cy:l,r:u})}));return i.a.createElement("g",{key:s},r)}));return i.a.createElement("g",null,o)},se=function(e){var t=e.className,s=e.cx,r=e.cy,a=e.r;return i.a.createElement("g",{transform:"rotate(45, ".concat(s,", ").concat(r,")")},i.a.createElement("rect",{className:t,x:s-a,y:r-a,width:2*a,height:2*a}))},re=function(e){var t=e.board,s=e.showForbiddens,r=e.showPropertyRows,a=e.showPropertyEyes;return i.a.createElement("g",null,r&&i.a.createElement(i.a.Fragment,null,i.a.createElement(ee,{black:!0,properties:t.properties.get(!0,"two")}),i.a.createElement(ee,{black:!0,properties:t.properties.get(!0,"closedThree")}),i.a.createElement(ee,{black:!1,properties:t.properties.get(!1,"two")}),i.a.createElement(ee,{black:!1,properties:t.properties.get(!1,"closedThree")}),i.a.createElement(ee,{black:!0,properties:t.properties.get(!0,"three")}),i.a.createElement(ee,{black:!0,properties:t.properties.get(!0,"four")}),i.a.createElement(ee,{black:!1,properties:t.properties.get(!1,"three")}),i.a.createElement(ee,{black:!1,properties:t.properties.get(!1,"four")})),a&&i.a.createElement(i.a.Fragment,null,i.a.createElement(te,{black:!0,properties:t.properties.get(!0,"three")}),i.a.createElement(te,{black:!0,properties:t.properties.get(!0,"four"),emphasized:!0}),i.a.createElement(te,{black:!1,properties:t.properties.get(!1,"three")}),i.a.createElement(te,{black:!1,properties:t.properties.get(!1,"four"),emphasized:!0})),s&&i.a.createElement(_,{points:t.forbiddens}))},ie=function(e){var t=e.black,s=e.points.map((function(e,s){return i.a.createElement(ne,{key:s,black:t,point:e})}));return i.a.createElement("g",null,s)},ae=function(e){var t=e.moves,s=Object(r.useContext)(Y),a=t.map((function(e,t){var r=Object(h.a)(e,2),a=r[0],n=r[1];return i.a.createElement("text",{key:t,className:"order ".concat(s.className(t%2===0)),x:s.cx(a),y:s.cy(n),dominantBaseline:"central"},t+1)}));return i.a.createElement("g",null,a)},ne=function(e){var t=e.black,s=e.point,a=Object(r.useContext)(Y),n=a.c(s),o=Object(h.a)(n,2),c=o[0],l=o[1],u=a.C/2*9/10;return i.a.createElement("circle",{className:"stone ".concat(a.className(t)),cx:c,cy:l,r:u})},oe=function(e){var t=e.point,s=Object(r.useContext)(Y),a=s.c(t),n=Object(h.a)(a,2),o=n[0],c=n[1],l=s.C/2*21/20;return i.a.createElement("circle",{className:"lastMarker",cx:o,cy:c,r:l})},ce=function(e){var t=e.moves,s=e.stones,r=e.showOrders,a=e.emphasizeLastMove;if(void 0===t&&void 0===s)throw new Error("moves or stones required");if(void 0===t&&r)throw new Error("moves required to show orders");if(void 0===t&&a)throw new Error("moves required to emphasize last");var n=s?s.blacks:t.filter((function(e,t){return t%2===0})),o=s?s.whites:t.filter((function(e,t){return t%2===1}));return i.a.createElement("g",null,a&&t&&t.length>=1&&i.a.createElement(oe,{point:t[t.length-1]}),i.a.createElement(ie,{black:!0,points:n}),i.a.createElement(ie,{black:!1,points:o}),t&&r&&i.a.createElement(ae,{moves:t}))},he=function(e){var t=e.state,s=e.setState,a=Object(r.useContext)(Y),n=Object(r.useContext)(k)[0];return i.a.createElement("svg",{className:"rjn-board",width:a.W,height:a.W,onClick:function(e){var r=e.currentTarget.getBoundingClientRect(),i=e.clientX-r.x,n=e.clientY-r.y;s(t.move(a.p([i,n])))}},i.a.createElement(V,{showIndices:n.showIndices}),i.a.createElement(re,{board:t.board,showForbiddens:n.showForbiddens,showPropertyRows:n.showPropertyRows,showPropertyEyes:n.showPropertyEyes}),i.a.createElement(ce,{moves:t.moves,showOrders:n.showOrders,emphasizeLastMove:n.emphasizeLastMove}))},le=s(64),ue=s(36),we=s(67),me=s(18),de=s(14),ke=s(68),be=s(69),fe=function(e){var t=e.buttonSize,s=Object(r.useContext)(k),a=Object(h.a)(s,2),n=a[0],o=a[1],c=n.showIndices&&n.showOrders&&n.emphasizeLastMove&&n.showForbiddens&&n.showPropertyRows&&n.showPropertyEyes;return i.a.createElement(we.a,{placement:"bottom"},i.a.createElement(we.e,null,i.a.createElement(le.a,{size:t,icon:me.g,"aria-label":"preference",variant:"ghost"})),i.a.createElement(we.d,{zIndex:4},i.a.createElement(we.b,null),i.a.createElement(we.c,{fontFamily:"Noto Sans",fontWeight:"normal"},i.a.createElement(l.a,{justify:"space-between",align:"center"},i.a.createElement(ke.a,{htmlFor:"controller-preference-all"},"All"),i.a.createElement(be.a,{id:"controller-preference-all",isChecked:c,onChange:function(){o(c?{showIndices:!1,showOrders:!1,emphasizeLastMove:!1,showForbiddens:!1,showPropertyRows:!1,showPropertyEyes:!1}:{showIndices:!0,showOrders:!0,emphasizeLastMove:!0,showForbiddens:!0,showPropertyRows:!0,showPropertyEyes:!0})}})),i.a.createElement(l.a,{justify:"space-between",align:"center"},i.a.createElement(ke.a,{htmlFor:"controller-preference-show-indices"},"Line indices"),i.a.createElement(be.a,{id:"controller-preference-show-indices",isChecked:n.showIndices,onChange:function(){return o(Object(de.a)(Object(de.a)({},n),{},{showIndices:!n.showIndices}))}})),i.a.createElement(l.a,{justify:"space-between",align:"center"},i.a.createElement(ke.a,{htmlFor:"controller-preference-show-orders"},"Move orders"),i.a.createElement(be.a,{id:"controller-preference-show-orders",isChecked:n.showOrders,onChange:function(){return o(Object(de.a)(Object(de.a)({},n),{},{showOrders:!n.showOrders}))}})),i.a.createElement(l.a,{justify:"space-between",align:"center"},i.a.createElement(ke.a,{htmlFor:"controller-preference-emphasize-last-move"},"Last move"),i.a.createElement(be.a,{id:"controller-preference-emphasize-last-move",isChecked:n.emphasizeLastMove,onChange:function(){return o(Object(de.a)(Object(de.a)({},n),{},{emphasizeLastMove:!n.emphasizeLastMove}))}})),i.a.createElement(l.a,{justify:"space-between",align:"center"},i.a.createElement(ke.a,{htmlFor:"controller-preference-show-forbiddens"},"Forbiddens"),i.a.createElement(be.a,{id:"controller-preference-show-forbiddens",isChecked:n.showForbiddens,onChange:function(){return o(Object(de.a)(Object(de.a)({},n),{},{showForbiddens:!n.showForbiddens}))}})),i.a.createElement(l.a,{justify:"space-between",align:"center"},i.a.createElement(ke.a,{htmlFor:"controller-preference-show-property-eyes"},"Row eyes"),i.a.createElement(be.a,{id:"controller-preference-show-property-eyes",isChecked:n.showPropertyEyes,onChange:function(){return o(Object(de.a)(Object(de.a)({},n),{},{showPropertyEyes:!n.showPropertyEyes}))}})),i.a.createElement(l.a,{justify:"space-between",align:"center"},i.a.createElement(ke.a,{htmlFor:"controller-preference-show-property-rows"},"Row lines"),i.a.createElement(be.a,{id:"controller-preference-show-property-rows",isChecked:n.showPropertyRows,onChange:function(){return o(Object(de.a)(Object(de.a)({},n),{},{showPropertyRows:!n.showPropertyRows}))}})))))},ve=function(e){var t=e.state,s=e.setState,r=e.buttonSize;return i.a.createElement(we.a,{placement:"bottom"},(function(e){var a=e.onClose;return i.a.createElement(i.a.Fragment,null,i.a.createElement(we.e,null,i.a.createElement(le.a,{icon:me.e,"aria-label":"reset",size:r,variant:"ghost",isDisabled:!t.canReset})),i.a.createElement(we.d,{zIndex:4,width:16},i.a.createElement(we.b,null),i.a.createElement(ue.a,{as:"button",size:"sm",variant:"ghost",variantColor:"red",fontFamily:"Noto Sans",fontWeight:"normal",onClick:function(){s(t.reset()),a&&a()}},"RESET")))}))},ye=function(e){var t=e.state,s=e.setState,a=Object(r.useContext)(Y);return i.a.createElement(l.a,{width:a.W,justifyContent:"space-around",alignItems:"center"},i.a.createElement(fe,{buttonSize:a.buttonSize}),i.a.createElement(ve,{state:t,setState:s,buttonSize:a.buttonSize}),i.a.createElement(l.a,{justifyContent:"center",alignItems:"center"},i.a.createElement(le.a,{onClick:function(){return s(t.toStart())},icon:me.c,"aria-label":"to start",size:a.buttonSize,variant:"ghost",isDisabled:t.isStart}),i.a.createElement(le.a,{onClick:function(){return s(t.backward())},icon:me.a,"aria-label":"backward",size:a.buttonSize,variant:"ghost",isDisabled:t.isStart}),i.a.createElement(ue.a,{width:6,size:a.buttonSize,variant:"ghost",fontFamily:"Noto Serif",fontWeight:"normal",isDisabled:!0},t.cursor),i.a.createElement(le.a,{onClick:function(){return s(t.forward())},icon:me.b,"aria-label":"forward",size:a.buttonSize,variant:"ghost",isDisabled:t.isLast}),i.a.createElement(le.a,{onClick:function(){return s(t.toLast())},icon:me.d,"aria-label":"to last",size:a.buttonSize,variant:"ghost",isDisabled:t.isLast})),i.a.createElement(le.a,{onClick:function(){return s(t.undo())},icon:me.h,"aria-label":"undo",size:a.buttonSize,variant:"ghost",isDisabled:!t.canUndo}),i.a.createElement(le.a,{icon:me.f,"aria-label":"share",size:a.buttonSize,variant:"ghost",isDisabled:!0}))},pe=function(){function e(t){if(Object(m.a)(this,e),this.game=void 0,this.cursor=void 0,this.board=void 0,"game"in t)this.game=t.game,this.cursor=t.cursor,this.board=t.board;else if("code"in t){var s=t.code.split("/");if(2!==s.length)throw new Error("invalid code");var r=Object(h.a)(s,2),i=r[0],a=r[1];this.game=new H({code:i}),this.cursor=parseInt(a),this.board=new J({size:15,blacks:this.game.blacks,whites:this.game.whites})}else this.game=new H({}),this.cursor=0,this.board=new J({size:15})}return Object(f.a)(e,[{key:"move",value:function(t){if(!this.canMove)return this;if(this.game.isBlackTurn&&this.board.forbidden(t))return this;var s=this.game.move(t);return void 0===s?this:new e({game:s,board:this.board.put(this.game.isBlackTurn,t),cursor:this.cursor+1})}},{key:"undo",value:function(){if(!this.canUndo)return this;var t=this.game.undo();return void 0===t?this:new e({game:t,board:this.board.remove(this.game.moves[this.game.moves.length-1]),cursor:this.cursor-1})}},{key:"reset",value:function(){return this.canReset?new e({}):this}},{key:"forward",value:function(){return this.isLast?this:new e({game:this.game,board:this.board.put(this.cursor%2===0,this.game.moves[this.cursor]),cursor:this.cursor+1})}},{key:"backward",value:function(){return this.isStart?this:new e({game:this.game,board:this.board.remove(this.game.moves[this.cursor-1]),cursor:this.cursor-1})}},{key:"jump",value:function(t){if(t<0||this.game.moves.length<t)return this;var s=this.game.fork(t);return new e({game:this.game,board:new J({size:this.board.size,blacks:s.blacks,whites:s.whites}),cursor:t})}},{key:"toStart",value:function(){return this.jump(0)}},{key:"toLast",value:function(){return this.jump(this.game.moves.length)}},{key:"isStart",get:function(){return 0===this.cursor}},{key:"isLast",get:function(){return this.cursor===this.game.moves.length}},{key:"canMove",get:function(){return this.isLast}},{key:"canUndo",get:function(){return this.isLast&&!this.isStart}},{key:"canReset",get:function(){return this.game.moves.length>0}},{key:"moves",get:function(){return this.game.moves.slice(0,this.cursor)}},{key:"code",get:function(){return"".concat(this.game.code,"/").concat(this.cursor)}}]),e}(),ze=function(e){try{return new pe({code:e.slice(1)})}catch(t){return console.log("Invalid fragment: '".concat(e,"'")),new pe({})}},ge=function(){var e=new K(window.innerWidth),t=ze(window.location.hash),s=Object(r.useState)(t),a=Object(h.a)(s,2),n=a[0],o=a[1];Object(r.useEffect)((function(){window.history.replaceState(null,"","#".concat(n.code))}),[n.code]);var c=function(){var e=b(localStorage.getItem("preference")||"{}"),t=Object(r.useState)(e),s=Object(h.a)(t,2),i=s[0],a=s[1];return[i,function(e){a(e),localStorage.setItem("preference",JSON.stringify(e))}]}(),m=Object(h.a)(c,2),d=m[0],f=m[1];return Object(r.useEffect)((function(){return f(d)}),[d]),i.a.createElement(Y.Provider,{value:e},i.a.createElement(k.Provider,{value:[d,f]},i.a.createElement(l.a,{justify:"center"},i.a.createElement(u.a,{spacing:4,my:2},i.a.createElement(l.a,{justify:"center",align:"center"},i.a.createElement(w.a,{as:"h1",textAlign:"center",fontFamily:"Noto Sans",fontWeight:"normal",color:"gray.500"},"Renju Note BETA")),i.a.createElement(l.a,{justify:"center",align:"center"},i.a.createElement(he,{state:n,setState:o})),i.a.createElement(l.a,{justify:"center",align:"center"},i.a.createElement(ye,{state:n,setState:o}))))))},Ee=function(){return i.a.createElement(o.a,null,i.a.createElement(c.a,null),i.a.createElement(ge,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(Ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[46,1,2]]]);
//# sourceMappingURL=main.2d9c0cb5.chunk.js.map